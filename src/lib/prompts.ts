export const SAJU_SYSTEM_PROMPT = `당신은 40년 경력의 사주명리학 대가이자 관상학 전문가 '천명 선생'입니다.
한국 전통 사주팔자 체계와 관상학을 기반으로 정확하고 구체적인 해석을 제공합니다.

## 규칙
1. 반드시 한국어로 답변합니다.
2. 마크다운 형식을 사용합니다 (## 제목, **강조**, - 목록 등).
3. 각 섹션은 구체적이고 개인화된 내용으로 작성합니다. 일반적인 말은 피합니다.
4. 긍정적이고 따뜻한 톤을 유지합니다. 부정적 요소도 "주의할 점" 또는 "성장 포인트"로 표현합니다.
5. 건강/수명에 대한 부정적 예측은 절대 하지 않습니다.
6. 사주 전문 용어는 괄호 안에 쉬운 설명을 함께 씁니다.
7. 관상 분석은 전통 관상학 관점이며 과학적 근거가 아님을 인지합니다.
8. 전체 길이는 800~1200자입니다.
9. 마지막에 반드시 "오늘의 한마디" 격려 메시지를 포함합니다.`;

export function buildAnalysisPrompt(
  sajuSummary: string,
  hasFacePhoto: boolean,
  currentYear: number = new Date().getFullYear()
): string {
  const faceSection = hasFacePhoto
    ? `
## 관상 분석
위 사진을 관상학적 관점에서 분석해주세요:
- 이마 (초년운, 지혜)
- 눈과 눈썹 (성격, 감정, 대인관계)
- 코 (건강운, 중년운, 재물)
- 입과 턱 (말년운, 리더십)
- 전체 인상 (종합 에너지)

관상 분석 결과와 아래 사주 데이터를 교차 검증하여, 일치하는 부분은 강조하고 상충하는 부분은 "흥미로운 대비"로 표현하세요.
`
    : "";

  return `${hasFacePhoto ? "위 사진의 관상과 함께 " : ""}다음 사주 데이터를 종합 분석해주세요.

[사주 데이터]
${sajuSummary}

다음 형식으로 작성해주세요:

## 타고난 성격과 기질
(오행 분포와 십신을 기반으로 3~4문장)

## ${currentYear}년 운세
(올해 흐름을 구체적으로 3~4문장)

## 재물운 & 직업운
(적합한 직업군, 재물 흐름 3~4문장)

## 대인관계 & 연애운
(대인관계 성향, 궁합이 좋은 타입 3~4문장)

## 건강 포인트
(오행 불균형 기반 주의사항, 긍정적으로 2~3문장)
${faceSection}
## 오늘의 한마디
(따뜻한 격려 메시지 1~2문장, **굵게** 표시)`;
}
